<div class="well">
  <div id="nav-bar" class="row">
    <div class="col-md-6 col-md-offset-1">
      <ul class="nav nav-pills">
        <li role="presentation" data-toggle="collapse" data-target="#song-select"
        (click)="setActiveTab(0)" [ngClass]="{'active' : isActiveTab[0]}">
        <a href="#"><i class="glyphicon glyphicon-music"></i>&nbsp;Library</a></li>
        <li role="presentation" class="border" data-toggle="collapse" data-target="#edit-song"
        (click)="setActiveTab(1)" [ngClass]="{'active' : isActiveTab[1]}">
        <a href="#"><i class="glyphicon glyphicon-pencil"></i>&nbsp;Edit Info</a></li>
        <li role="presentation" data-toggle="collapse" data-target="#add-song"
        (click)="setActiveTab(2)" [ngClass]="{'active' : isActiveTab[2]}">
        <a href="#"><i class="glyphicon glyphicon-cloud-upload"></i>&nbsp;Add Songs</a></li>
      </ul>
    </div>
  </div>
  <div id="song-select" class="collapse" *ngIf="isActiveSection[0]">
    <br />
    <div *ngIf="artists.length == 0">
      <div class="row text-list">
        <div class="col-md-3 col-md-offset-1">
          <p>Your library is currently empty.</p>
        </div>
      </div>
    </div>
    <div *ngIf="artists.length != 0">
      <div class="row text-list">
        <div class="col-md-2 col-md-offset-1 show-list library-text">
          <div class="text-list-title">Artists</div>
          <ul class="hide-bullets">
            <div class="library-list-artist" *ngFor="let artist of artists">
              <li [ngClass]="{'library-text-slide' : artist.name.length > 30, 'show-list-item' : artist.name.length <= 30}">
                <a href="#" [ngClass]="artist.id == selArtistId ? 'text-selected' : ''"
                (click)="getAlbums(artist.id)">
                <span *ngIf="artist.name != ''">{{artist.name}}</span>
                <span *ngIf="artist.name == ''">[Unnamed Artist]</span>
              </a>
            </li>
          </div>
        </ul>
      </div>
      <div class="col-md-4 show-list" *ngIf="selArtistId != null">
        <div class="text-list-title">Albums</div>
        <ul class="hide-bullets">
          <div class="library-list-album" *ngFor="let album of albums">
            <li [ngClass]="{'library-text-slide' : album.name.length > 37, 'show-list-item' : album.name.length <= 37}">
              <a href="#" [ngClass]="album.id == selAlbumId ? 'text-selected' : ''"
              (click)="getSongs(selArtistId, album.id)">
              <span *ngIf="album.name != ''">{{album.name}}</span>
              <span *ngIf="album.name == ''">[Unnamed Album]</span>
            </a>
          </li>
        </div>
      </ul>
    </div>
    <div class="col-md-4 show-list library-text" *ngIf="selAlbumId != null" >
      <div class="text-list-title">Songs</div>
      <ul class="hide-bullets">
        <div class="library-list-songs" *ngFor="let song of songs">
          <li [ngClass]="{'library-text-slide' : song.name.length > 45, 'show-list-item' : song.name.length <= 45}">
            <a href="#" [ngClass]="song.id == selSongId ? 'text-selected' : ''"
            (click)="getSong(song.id)" data-toggle="collapse" data-target="#song-select">
            <span *ngIf="song.track != 0">{{song.track}}. </span>
            <span *ngIf="song.name != ''">{{song.name}}</span>
            <span *ngIf="song.name == ''">[Unnamed Song]</span>
          </a>
        </li>
      </div>
    </ul>
  </div>
</div>
</div>
<br />
</div>
<div id="edit-song" class="collapse" *ngIf="isActiveSection[1]">
    <div class="row text-list" *ngIf="!hasSelSong">
      <br />
      <div class="col-md-4 col-md-offset-1">
        <p>Select a song from the library first.</p>
      </div>
  </div>
  <br />
  <div *ngIf="hasSelSong">
    <div class="extra-padding text-list vcenter">
      <div class="row">
        <div class="col-md-1 col-md-offset-1">
          Track:
        </div>
        <div class="col-md-1">
          <input type="text" class="form-control input-md input-textbox-xs" [(ngModel)]="currSongInfo.song.track">
        </div>
      </div>
      <div class="row">
        <div class="col-md-1 col-md-offset-1">
          Name:
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control input-lg" [(ngModel)]="currSongInfo.song.name">
        </div>
      </div>
      <div class="row">
        <div class="col-md-1 col-md-offset-1">
          Artist:
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control input-lg" [(ngModel)]="currSongInfo.artist.name">
        </div>
      </div>
      <div class="row">
        <div class="col-md-1 col-md-offset-1">
          Album:
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control input-lg" [(ngModel)]="currSongInfo.album.name">
        </div>
      </div>
      <div class="row">
        <div class="col-md-1 col-md-offset-1">
          Year:
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control input-lg" [(ngModel)]="currSongInfo.song.year">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-2 col-md-offset-1">
        <div class="btn-group">
          <button class="btn btn-default btn-sm" [disabled]="currSongInfo.song.name == null
          || currSongInfo.song.name == '' || currSongInfo.album.name == null || currSongInfo.album.name == ''
          || currSongInfo.artist.name == null || currSongInfo.artist.name == ''"
          (click)="updateSong()" data-toggle="collapse" data-target="#edit-song">Save</button>
          <button class="btn btn-default btn-danger btn-sm" (click)="removeSong()"
          data-toggle="collapse" data-target="#edit-song">Delete</button>
        </div>
      </div>
    </div>
    <br />
  </div>
</div>
<div id="add-song" class="collapse" *ngIf="isActiveSection[2]">
  <br />
  <div class="extra-padding text-list vcenter">
    <div class="row" *ngIf="!isUploading">
      <div class="col-md-1 col-md-offset-1">
        Upload:
      </div>
      <div class="col-md-4">
        <input type="file" (change)="addSongs($event.target.files)" placeholder="Upload Songs" accept=".mp3" multiple>
      </div>
    </div>
  </div>
  <div class="row" *ngIf="isUploading">
    <div class="col-md-3 col-md-offset-1">
      <div class="progress">
        <div class="progress-bar progress-bar-success" role="progressbar" [attr.aria-valuenow]="currProgress"
        aria-valuemin="0" [attr.aria-valuemax]="maxProgress" [ngStyle]="{width: currProgress / maxProgress | percent: '1.0-1'}">
        {{currProgress}} / {{maxProgress}} Files
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-3 col-md-offset-1 text-center" *ngIf="isUploading && currProgress == 0">
    Connecting...
  </div>
  <div class="col-md-3 col-md-offset-1 text-center" *ngIf="isUploading && currProgress > 0 && currProgress < maxProgress">
    Uploading...
  </div>
  <div class="col-md-3 col-md-offset-1 text-center" *ngIf="isUploading && currProgress == maxProgress">
    Upload complete!
  </div>
</div>
<br />
</div>
</div>
<div class="container show-playback-info" *ngIf="hasSelSong">
  <div class="row">
    <div class="col-md-5">
      <img id="album-art" class="img-responsive img-rounded img-border" [src]="songArtworkSrc">
    </div>
    <div class="col-md-7">
      <div class="row">
        <div class="col-md-12">
          <div id="song-info-name">
            <p [ngClass]="{'song-info-slide' : currSongInfo.song.name.length > 33}">{{currSongInfo.song.name}}</p>
          </div>
        </div>
      </div>
      <div id="song-info">
        <div class="row">
          <div class="col-md-12">
            <div>{{currSongInfo.artist.name}}</div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div>{{currSongInfo.album.name}}</div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div>{{currSongInfo.song.year}}</div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8">
          <hr>
        </div>
      </div>
      <div id="play-progress-text" class="row">
        <div class="col-md-12">
          {{currPlayPosFormatted}} / {{maxPlayPosFormatted}}
        </div>
      </div>
      <div id="play-progress-bar" class="row">
        <div class="col-md-12">
          <input (change)="changeSongPos($event.target.value)" type="range" step="0.001" min="0" value="{{currPlayPos}}" max="{{maxPlayPos}}">
        </div>
      </div>
      <div id="playback-controls" class="row">
        <div class="col-md-10">
          <button class="btn btn-info btn-circle" [ngClass]="{'btn-playing glyphicon-spin' : isPlayingSong, 'btn-play' : !isPlayingSong}"
          (click)="playSong()" [disabled]="isPlayingSong">
          <i class="glyphicon" [ngClass]="{'glyphicon-refresh' : isPlayingSong, 'glyphicon-play' : !isPlayingSong}"></i>
        </button>
        <button type="button" class="btn btn-primary btn-circle btn-pause" (click)="pauseSong()" [disabled]="!isPlayingSong">
          <i class="glyphicon glyphicon-pause"></i>
        </button>
        <button type="button" class="btn btn-danger btn-circle btn-stop" (click)="stopSong()">
          <i class="glyphicon glyphicon-stop"></i>
        </button>
        <button type="button" class="btn btn-default btn-circle btn-circle btn-previous" (click)="previousSong()">
          <i class="glyphicon glyphicon-fast-backward"></i>
        </button>
        <button type="button" class="btn btn-default btn-circle btn-circle btn-next" (click)="nextSong()">
          <i class="glyphicon glyphicon-fast-forward"></i>
        </button>
        <button type="button" class="btn btn-circle btn-settings" [ngClass]="{'btn-success glyphicon-spin-slow' : doRepeat || doShuffle, 'btn-basic' : !doRepeat && !doShuffle}"
        (click)="doShowSettings = !doShowSettings">
        <i class="glyphicon glyphicon-cog"></i>
      </button>
    </div>
  </div>
  <div id="playback-settings" class="row" *ngIf="doShowSettings">
    <div class="col-md-8">
      <button type="button" class="btn btn-success btn-circle btn-repeat" [ngClass]="{'btn-success glyphicon-spin-slow' : doRepeat, 'btn-basic' : !doRepeat}"
      (click)="doRepeat = !doRepeat" [disabled]="doShuffle">
      <i class="glyphicon glyphicon-repeat"></i>
    </button>
    <button type="button" class="btn btn-success btn-circle btn-shuffle" [ngClass]="{'btn-success' : doShuffle, 'btn-basic' : !doShuffle}"
    (click)="doShuffle = !doShuffle" [disabled]="doRepeat">
    <i class="glyphicon glyphicon-random" [ngClass]="{'glyphicon-shake' : doShuffle}"></i>
  </button>
  <input class="volume-slider" (change)="changeVolume($event.target.value)" type="range" step="0.001" min="0" value="1" max="1">
</div>
</div>
</div>
</div>
</div>
<br />
